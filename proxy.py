#coding:utf8

"""
proxiex.py
~~~~~~~~~~~~~

该模块包含所有代理服务器列表，提供代理选择功能。
"""

from threadPool import ThreadPool
    import requests


#代理服务器列表
proxiex = [
'122.72.112.148:80',
'122.72.112.166:80',
'113.207.124.165:8080',
'222.83.160.45:8080',
'219.130.39.9:3128',
'211.161.152.100:80',
'221.176.14.72:80',
'222.124.147.105:8080',
'190.0.57.98:8080',
'202.127.28.67:3128',
'58.83.224.217:8080',
'112.125.42.20:10080',
'218.241.153.43:8080',
'202.55.5.245:8081',
'85.185.182.1:8080',
'211.161.152.107:80',
'211.161.152.98:80',
'118.98.35.251:8080',
'122.141.243.216:80',
'187.125.147.178:3128',
'175.103.58.55:3128',
'218.94.149.114:8080',
'122.90.14.226:80',
'200.61.31.66:8080',
'88.85.125.78:8080',
'211.167.112.14:82',
'61.167.49.188:8080',
'118.97.16.106:8080',
'211.167.112.15:82',
'182.253.17.130:3128',
'112.25.12.38:80',
'118.97.8.84:3128',
'210.14.143.122:80',
'112.25.12.39:80',
'187.0.222.167:3128',
'27.50.22.186:8080',
'189.91.223.42:3128',
'101.44.1.26:80',
'190.96.64.234:8080',
'211.144.76.7:8181',
'78.39.68.145:3128',
'177.69.11.1:8080',
'217.146.208.162:8080',
'186.113.26.37:3128',
'186.4.110.36:8080',
'177.103.139.64:3128',
'200.54.92.187:80',
'200.166.194.135:3128',
'200.54.92.187:3128',
'189.39.115.174:3128',
'201.238.227.202:3128',
'190.0.45.98:8080',
'187.63.15.61:3128',
'122.72.20.126:80',
'122.72.20.124:80',
'122.72.20.125:80',
'80.90.27.60:8080',
'190.121.135.178:8080',
'122.72.20.127:80',
'213.222.148.141:8080',
'218.76.157.98:8001',
'79.101.37.131:8080',
'175.136.192.5:8080',
'202.182.172.2:3128',
'121.17.144.132:8080',
'118.96.153.64:3128',
'118.97.174.218:8080',
'219.83.100.195:8080',
'202.77.107.106:8082',
'201.144.252.115:3128',
'188.254.250.115:8080',
'186.113.26.38:3128',
'202.75.18.34:8080',
'200.11.240.68:3128',
'92.39.54.161:80',
'200.105.245.237:3129',
'80.90.12.36:8080',
'198.145.120.198:3128',
'77.38.171.87:8080',
'187.6.254.19:3128',
'119.252.160.34:8080',
'89.251.103.130:8080',
'190.128.138.114:3128',
'222.124.178.98:3128',
'60.12.117.27:80',
'222.74.212.66:808',
'201.64.254.228:3128',
'190.29.30.114:8080',
'125.69.132.100:8080',
'122.225.107.27:80',
'202.51.107.36:8080',
'190.151.111.202:8080',
'200.42.69.94:8080',
'186.113.26.36:3128',
'201.251.5.248:8080',
'72.64.146.136:3128',
'91.191.145.233:3128',
'146.255.9.124:3128',
'77.237.160.145:8080',
'190.255.58.244:8080',
'117.102.94.36:8080',
'217.171.58.106:80',
'122.0.66.102:8080',
'200.114.103.221:8080',
'180.243.235.40:8080',
'190.182.18.109:3128',
'77.65.19.35:3128',
'124.195.124.166:8080',
'46.252.244.178:3128',
'210.14.143.118:80',
'180.243.237.149:3128',
'110.139.118.95:8080',
'200.5.113.202:8080',
'180.244.214.180:8080',
'218.107.193.59:80',
'78.134.255.43:8080',
'121.52.71.23:80',
'61.135.164.220:80',
'186.46.187.43:3128',
'68.71.76.242:8082',
'87.244.206.170:8080',
'177.100.19.151:8080',
'190.105.161.208:3128',
'186.113.26.34:3128',
'89.73.177.208:8080',
'118.97.30.210:3128',
'200.169.71.181:8080',
'202.143.185.107:8080',
'180.244.208.185:8080',
'78.134.255.42:8080',
'118.96.250.2:8080',
'162.105.139.109:3128',
'119.82.239.50:8080',
'58.67.147.200:8080',
'80.69.243.68:3128',
'217.171.58.106:8080',
'81.213.157.71:80',
'118.98.172.2:8888',
'119.1.174.28:3128',
'91.120.127.127:3128',
'202.129.59.70:8080',
'211.144.76.58:9000',
'118.96.94.252:3128',
'177.20.212.89:8080',
'202.164.211.75:8080',
'203.113.25.122:80',
'201.217.57.108:80',
'180.241.220.161:3128',
'187.5.96.141:8080',
'110.139.150.155:8080',
'200.202.240.174:80',
'213.197.182.78:3128',
'46.232.207.230:8080',
'122.102.45.86:3128',
'41.59.17.36:8080',
'124.205.18.183:80',
'190.15.207.246:8080',
'114.141.180.79:3128',
'187.61.146.126:3128',
'190.37.141.210:8080',
'125.90.196.153:3128',
'88.131.82.241:3128',
'210.101.131.232:8080',
'112.217.228.212:8080',
'173.213.108.113:8080',
'216.244.71.143:8080',
'200.27.114.228:8080',
'93.152.175.1:8080',
'200.75.51.151:8080',
'200.195.178.42:8080',
'190.248.129.62:8080',
'61.30.127.2:80',
'200.42.69.94:8080',
'219.75.27.11:80',
'41.75.201.146:8080',
'88.85.125.78:8080',
'200.109.228.67:8080',
'80.233.133.115:8080',
'222.124.147.105:8080',
'69.46.99.186:80',
'200.208.251.214:8080',
'46.32.13.10:8080',
'190.0.57.98:8080',
'219.83.100.205:8080',
'187.110.160.23:8080',
'178.157.62.242:80',
'202.171.253.98:80',
'190.228.33.114:8080',
'118.97.58.166:8080',
'187.109.14.13:8080',
'203.189.89.153:8080',
'197.253.4.174:8080',
'213.192.60.99:8080',
'222.124.35.117:8080',
'198.100.157.30:8080',
'111.94.146.67:8080',
'80.58.250.68:80',
'220.224.234.56:8080',
'193.53.4.252:8080',
'82.116.36.10:8082',
'118.98.75.50:8080',
'87.101.137.97:8080',
'117.102.94.36:8080',
'177.36.242.5:8080',
'190.144.162.238:8080',
'189.76.81.250:8080',
'200.42.56.146:8080',
'180.244.221.146:8090',
'117.211.123.62:80',
'216.17.106.16:8080',
'200.141.204.130:8080',
'180.245.106.24:8080',
'91.98.44.218:80',
'186.208.73.10:8080',
'89.251.103.130:8080',
'186.148.149.217:8080',
'210.101.131.231:8080',
'203.172.188.34:80',
'50.22.206.179:8080',
'200.43.57.30:8080',
'118.97.100.75:8080',
'118.98.35.251:8080',
'80.78.65.186:8080',
'77.89.233.54:8080',
'190.116.87.4:8080',
'77.38.171.87:8080',
'202.55.5.245:8081',
'186.4.110.36:8080',
'200.208.251.218:8080',
'219.83.100.195:8080',
'219.159.105.180:8080',
'61.55.141.10:80',
'93.152.175.16:8080',
'200.195.176.77:8080',
'118.96.148.17:8080',
'79.101.37.138:8080',
'80.58.29.174:80',
'118.97.212.162:8080',
'95.9.251.53:8080',
'213.222.148.141:8080',
'200.208.251.220:8080',
'80.58.29.173:80',
'68.71.76.242:8082',
'200.54.92.187:80',
'210.14.143.118:80',
'190.52.56.251:8080',
'221.7.145.42:8080',
'60.190.189.214:8123',
'213.222.148.141:80',
'61.152.176.48:80',
'79.101.37.133:8080',
'119.92.244.146:80',
'118.96.121.17:8080',
'61.187.186.150:81',
'92.39.54.161:80',
'110.139.150.155:80',
'186.215.231.214:8080',
'190.211.132.33:8080',
'122.90.14.226:80',
'124.133.48.86:28134',
'190.29.24.23:8080',
'85.92.159.84:8080',
'61.167.49.188:8080',
'202.191.57.37:443',
'114.35.167.38:8080',
'180.249.60.38:80',
'79.101.37.131:8080',
'121.52.71.23:80',
'91.144.44.65:8080',
'177.100.19.151:8080',
'190.128.170.18:8080',
'211.144.76.58:9000',
'122.72.20.127:80',
'190.0.58.58:8080',
'202.137.22.183:8080',
'112.125.42.20:10080',
'180.94.88.58:80',
'112.216.29.245:80',
'59.172.208.190:8080',
'121.17.144.132:8080',
'62.121.64.19:8080',
'200.208.251.210:8080',
'60.51.176.162:8080',
'180.94.88.58:8080',
'122.144.14.60:8080',
'190.104.5.106:8080',
'212.233.147.48:8080',
'110.139.13.121:8080',
'200.43.57.233:8081',
'122.72.20.126:80',
'177.70.8.162:80',
'217.171.58.106:8080',
'222.134.74.30:8080',
'210.51.60.183:80',
'187.44.132.226:8080',
'202.143.146.198:8080',
'210.14.143.122:80',
'27.50.22.186:8080',
'36.68.255.106:8080',
'180.247.103.63:80',
'110.136.114.14:8080',
'118.96.192.84:8080',
'209.62.12.130:8118',
'213.131.41.6:8080',
'125.39.238.240:8080',
'202.162.198.178:8000',
'58.56.108.35:28134',
'41.59.4.15:8080',
'115.68.1.209:8080',
'77.48.30.223:8080',
'177.54.205.103:8080',
'180.242.183.226:8080',
'176.62.144.26:8080',
'46.232.207.230:8080',
'212.33.250.197:8080',
'200.0.209.118:8080',
'190.9.128.234:80',
'71.189.47.2:8081',
'187.33.255.43:8080',
'190.220.8.212:8000',
'187.1.19.10:8080',
'125.167.38.167:80',
'58.83.224.217:8080',
'78.134.255.43:8080',
'85.9.74.111:8080',
'217.108.157.146:80',
'203.113.25.122:80',
'42.121.14.229:8080',
'203.93.104.20:80',
'202.181.164.100:80',
'218.248.4.101:8080',
'118.174.0.155:8080',
'118.96.251.234:8080',
'119.252.160.34:8080',
'222.255.27.223:18888',
'219.159.198.57:8080',
'187.16.250.34:80',
'124.205.178.62:80',
'180.247.127.139:8080',
'190.29.30.114:8080',
'200.196.51.130:8080',
'118.102.27.216:8080',
'89.218.94.164:8081',
'78.131.59.226:8080',
'69.163.96.25:8080',
'122.72.20.125:80',
'124.195.124.166:8080',
'190.41.70.37:8001',
'59.172.208.189:8080',
'180.244.214.180:8080',
'110.139.118.95:8080',
'186.192.17.138:8080',
'187.54.183.229:8080',
'202.51.113.81:8080',
'121.14.9.76:80',
'77.73.130.70:8081',
'180.244.193.110:8080',
'41.78.103.42:8080',
'121.204.0.2:80',
'202.43.113.21:8888',
'61.156.217.122:8000',
'180.94.83.194:8080',
'1.234.45.130:80',
'221.130.23.82:80',
'120.85.132.234:80',
'116.66.204.50:8080',
'201.20.189.201:8080',
'213.24.60.52:8080',
'219.94.232.243:80',
'190.216.28.228:8080',
'113.59.33.177:8080',
'180.249.60.38:8080',
'190.202.241.180:8080',
'78.188.31.151:80',
'119.110.71.109:8080',
'67.55.115.76:8080',
'61.185.143.178:8080',
'221.6.154.73:8080',
'110.139.150.155:8080',
'203.190.190.68:8080',
'103.28.227.78:8080',
'210.75.120.3:80',
'177.66.201.29:8080',
'101.44.1.28:80',
'64.79.89.66:10001',
'41.78.239.194:8080',
'101.44.1.27:80',
'114.80.149.183:80',
'41.130.11.51:8080',
'190.9.128.96:80',
'174.137.184.37:8080',
'122.141.243.216:80',
'41.134.164.77:8080',
'190.15.207.246:8080',
'110.139.207.28:8080',
'218.107.193.59:80',
'60.28.240.123:82',
'180.246.30.239:8080',
'190.246.141.111:8080',
'124.205.18.183:80',
'202.51.107.37:8080',
'210.75.120.5:80',
'209.88.88.40:80',
'41.198.70.66:8080',
'187.87.234.40:8080',
'93.181.161.198:8080',
'2.228.6.74:80',
'61.235.97.206:8080',
'180.151.27.129:8888',
'60.250.78.151:81',
'95.181.40.202:80',
'60.216.99.222:80',
'180.167.15.242:8080',
'210.75.120.2:80',
'89.73.177.208:8080',
'111.221.40.229:80', ]




def getProxy():
    #动态从cnproxy下载代理列表，再check...有空再写
    pass

def checkProxy(proxy):
    try:
        response = requests.get('http://www.baidu.com',timeout=40, proxies={'http':proxy})
        if '030173' in response.text:
            return 'ok',proxy
    except Exception,e:
        return 'fail',proxy

def saveProxies():
    threadPool = ThreadPool(30)
    threadPool.startThreads()

    proxyFileOK = open('proxyOK.txt','a')
    proxyFileFail = open('proxyFail.txt','a')
    for proxy in proxiex:
        threadPool.putTask(checkProxy, proxy)
    while threadPool.getTaskLeft():
        flag, proxy = threadPool.getTaskResult()
        print flag, proxy
        if flag == 'ok':
            proxyFileOK.write(proxy)
            proxyFileOK.write('\n')
        else:
            proxyFileFail.write(proxy)
            proxyFileFail.write('\n')

    threadPool.stopThreads()
    proxyFileOK.close()
    proxyFileFail.close()

def main():
    saveProxies()
    



if __name__ == '__main__':
    main()
